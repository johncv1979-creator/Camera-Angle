<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Camera & Subject Azimuth Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f6fa;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }

    .app-header {
      background: #0077cc;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      width: 100%;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .container {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 95%;
      max-width: 500px;
      margin: 20px auto;
    }

    h2 {
      font-size: 18px;
      margin-bottom: 15px;
      text-align: center;
      color: #333;
    }

    label {
      font-size: 15px;
      display: block;
      margin: 12px 0 6px;
      font-weight: bold;
      color: #444;
    }

    input, select {
      font-size: 16px;
      padding: 12px;
      width: 100%;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }

    input[type=range] {
      width: 100%;
      margin-top: 5px;
    }

    button {
      font-size: 18px;
      padding: 14px;
      background: #0077cc;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      margin-top: 10px;
      font-weight: bold;
    }

    button:hover {
      background: #005fa3;
    }

    .output {
      margin-top: 20px;
      padding: 15px;
      border-radius: 10px;
      background: #f9fafb;
      font-size: 16px;
      border: 1px solid #ddd;
      color: #333;
    }

    .output div {
      padding: 8px;
      margin-bottom: 8px;
      background: #eef6ff;
      border-radius: 8px;
      border: 1px solid #cce0ff;
    }

    .error {
      color: red;
      margin-top: 10px;
    }

    .slider-container {
      display: none;
      margin-bottom: 15px;
    }

    .hint {
      font-size: 14px;
      color: #555;
      margin-top: -4px;
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <div class="app-header">Azimuth Calculator</div>

  <div class="container">
    <h2>Camera & Subject Setup</h2>

    <label for="sunAzimuth">Sun Azimuth (°)</label>
    <input type="number" id="sunAzimuth" placeholder="e.g., 270">

    <label for="option">Lighting Option</label>
    <select id="option" onchange="toggleSlider()">
      <option value="silhouette">Silhouette (Camera faces sun)</option>
      <option value="halo">Halo / Edge Glow</option>
      <option value="rimlight">Classic Rim</option>
      <option value="threequarter">Three-Quarter Back</option>
      <option value="keylight">Sun as Keylight</option>
      <option value="sidelight">Side Light</option>
    </select>

    <div class="slider-container" id="sliderBox">
      <label for="offsetRange">Offset Angle: <span id="offsetValue">30</span>°</label>
      <input type="range" id="offsetRange" min="5" max="120" value="30" oninput="updateSliderValue()">
      <div class="hint" id="rangeHint"></div>
      <div class="hint" id="elevationHint"></div>
    </div>

    <button onclick="calculate()">Calculate</button>

    <div id="error" class="error"></div>
    <div class="output" id="result">Results will appear here.</div>
  </div>

  <script>
    function normalize(angle) {
      return (angle % 360 + 360) % 360;
    }

    const defaults = {
      halo: { value: 15, range: "Ideal Range: 10–20°", elevation: "Best Sun Elevation: 5–20°" },
      rimlight: { value: 40, range: "Ideal Range: 30–45°", elevation: "Best Sun Elevation: 10–30°" },
      threequarter: { value: 70, range: "Ideal Range: 60–75°", elevation: "Best Sun Elevation: 15–35°" },
      keylight: { value: 35, range: "Ideal Range: 30–45° (from front)", elevation: "Best Sun Elevation: 10–25°" },
      sidelight: { value: 90, range: "Ideal Range: 85–95°", elevation: "Best Sun Elevation: 15–35°" },
      silhouette: { value: 0, range: "Offset not applicable", elevation: "Best Sun Elevation: 0–15°" }
    };

    function updateSliderValue() {
      document.getElementById("offsetValue").textContent = document.getElementById("offsetRange").value;
    }

    function toggleSlider() {
      const option = document.getElementById("option").value;
      const sliderBox = document.getElementById("sliderBox");
      const rangeHint = document.getElementById("rangeHint");
      const elevationHint = document.getElementById("elevationHint");
      const slider = document.getElementById("offsetRange");

      if (defaults[option]) {
        if (option === "silhouette") {
          sliderBox.style.display = "none";
        } else {
          sliderBox.style.display = "block";
          slider.value = defaults[option].value;
          document.getElementById("offsetValue").textContent = slider.value;
        }
        rangeHint.textContent = defaults[option].range;
        elevationHint.textContent = defaults[option].elevation;
      }
    }

    function calculate() {
      const sunInput = document.getElementById("sunAzimuth").value;
      const sun = parseFloat(sunInput);
      const option = document.getElementById("option").value;
      const offset = parseInt(document.getElementById("offsetRange").value);
      const errorBox = document.getElementById("error");
      let cameras = [], subjects = [], labels = [];

      if (isNaN(sun)) {
        errorBox.textContent = "⚠️ Please enter a valid Sun Azimuth.";
        document.getElementById("result").innerHTML = "No results yet.";
        return;
      }
      errorBox.textContent = "";

      switch(option) {
        case "silhouette":
          cameras = [normalize(sun)];
          subjects = [normalize(sun + 180)];
          labels = ["Center (Facing Sun)"];
          break;

        case "halo":
        case "rimlight":
        case "threequarter":
        case "sidelight":
          cameras = [normalize(sun + offset), normalize(sun - offset)];
          subjects = cameras.map(c => normalize(c + 180));
          labels = [`Right of Sun (~${offset}°)`, `Left of Sun (~${offset}°)`];
          break;

        case "keylight":
          const base = normalize(sun + 180);
          cameras = [normalize(base - offset), normalize(base + offset)];
          subjects = [normalize(sun), normalize(sun)];
          labels = [`Front (Right Offset ~${offset}°)`, `Front (Left Offset ~${offset}°)`];
          break;
      }

      let outputHTML = `<strong>Sun Azimuth:</strong> ${sun}°<br><br>`;
      cameras.forEach((cam, i) => {
        outputHTML += `<div><strong>${labels[i]}:</strong><br>
          Camera Azimuth: ${cam}°<br>
          Subject Azimuth: ${subjects[i]}°</div>`;
      });

      document.getElementById("result").innerHTML = outputHTML;
    }
  </script>
</body>
</html>
